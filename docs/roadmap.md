# 段階的開発ロードマップ

## 第1段階: 事前確認・契約（〜1ヶ月）

- [ ] PayPay for Developers の寄付用途適合性を確認
  - 公式規約/FAQの確認
  - 窓口への問い合わせ
- [ ] 楽天ペイ（オンライン決済）の寄付用途適合性を確認
- [ ] 申込・審査・契約フローを完了
- [ ] Webhook受信先やIP制限の要件整理
- [ ] 適合性NGの場合は代替案を再選定（ADR更新）

## 第2段階: インフラ整備

- [ ] GCPプロジェクトとGitHub連携の設定
- [ ] Cloud Run / Firestore / Secret Manager 構築
- [ ] Cloud NAT構築（固定IPの確保）
- [ ] 監視・ログ基盤の最低限セットアップ

## 第3段階: MVP実装

- [ ] 寄付金額選択ページの作成
- [ ] PayPay決済セッション作成API
- [ ] PayPay Webhook受信 + 署名検証
- [ ] Firestoreへの寄付記録保存
- [ ] サンクスページ表示

## 第4段階: 複数決済対応

- [ ] 楽天ペイ決済セッション作成API
- [ ] 楽天ペイ Webhook受信 + 署名検証
- [ ] 決済プロバイダ差分の抽象化

## 第5段階: 運用・分析強化

- [ ] GA4の流入元トラッキング
- [ ] 決済成功率/失敗率の可視化
- [ ] 寄付者問い合わせフローの整備

## 継続的改善

- [ ] 寄付者へのお礼・報告の仕組み構築
- [ ] 寄付キャンペーンの企画・実施
- [ ] 認定NPO取得後の寄付金控除案内整備
