# ADR-005: 固定金額QRコード方式

## Status
Accepted

## Context
チラシ・名刺・イベント用のQRコードを発行する際、支援ページへのリンクだけでは「ページを開く→金額選択→決済」と複数ステップが必要で離脱が発生する可能性がある。

## Decision
固定金額のPayPay決済URLを直接QRコード化する方式を採用する。

### 実装方式
1. `/qr/{amount}` エンドポイントを追加
2. ページ読み込み時に決済セッションを自動作成
3. 決済URLをQRコードとして表示
4. ユーザーはQRスキャン → PayPay決済ページに直接遷移

### 技術選択
- QRコード生成: qrcodejs（クライアントサイド）
- 決済セッション: 既存の `/api/donations/checkout` APIを利用

## Consequences

### Pros
- QRスキャン → 決済の最短フロー実現
- 既存APIの再利用でシンプルな実装
- 金額別QRコードの柔軟な発行が可能

### Cons
- 決済セッションには有効期限があるため、印刷物用には都度発行が必要
- 金額変更時は新しいQRコードの発行が必要

### Mitigations
- 有効期限カウントダウンを表示し、期限切れを明示
- ダウンロード機能で印刷用途に対応
- 支援ページ（`/donate`）からも固定金額QRコードへのリンクを提供

## References
- PR #4: feat: 固定金額QRコード決済機能を追加
